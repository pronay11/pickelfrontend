{"ast":null,"code":"import _defineProperty from\"/home/pronay/Desktop/achar/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/pronay/Desktop/achar/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/pronay/Desktop/achar/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/pronay/Desktop/achar/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/pronay/Desktop/achar/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import firebase from'./Firebase';import{getAuth,RecaptchaVerifier}from\"firebase/auth\";import{signInWithPhoneNumber}from\"firebase/auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var auth=getAuth();var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.handleChange=function(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;_this.setState(_defineProperty({},name,value));};_this.configureCaptcha=function(){window.recaptchaVerifier=new RecaptchaVerifier('sign-in-button',{'size':'invisible','callback':function callback(response){// reCAPTCHA solved, allow signInWithPhoneNumber.\n_this.onSignInSubmit();console.log(\"Recaptca varified\");},defaultCountry:\"BNG\"},auth);};_this.onSignInSubmit=function(e){e.preventDefault();_this.configureCaptcha();var phoneNumber=\"+88\"+_this.state.mobile;console.log(phoneNumber);var appVerifier=window.recaptchaVerifier;signInWithPhoneNumber(auth,phoneNumber,appVerifier).then(function(confirmationResult){// SMS sent. Prompt user to type the code from the message, then sign the\n// user in with confirmationResult.confirm(code).\nwindow.confirmationResult=confirmationResult;console.log(\"OTP has been sent\");// ...\n}).catch(function(error){// Error; SMS not sent\n// ...\nconsole.log(\"SMS not sent\");});};_this.onSubmitOTP=function(e){e.preventDefault();var code=_this.state.otp;console.log(code);window.confirmationResult.confirm(code).then(function(result){// User signed in successfully.\nvar user=result.user;console.log(JSON.stringify(user));alert(\"User is verified\");// ...\n}).catch(function(error){// User couldn't sign in (bad verification code?)\n// ...\n});};return _this;}_createClass(Login,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"login-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login Form\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onSignInSubmit,children:[/*#__PURE__*/_jsx(\"div\",{id:\"sign-in-button\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-login\",children:/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"mobile\",autoComplete:\"off\",className:\"form-control\",placeholder:\"  Enter Mobile Number...\",onChange:this.handleChange,\"aria-label\":\"Recipient's username\",\"aria-describedby\":\"button-addon2\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"button-login\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",type:\"sumbit\",id:\"button-addon2\",children:\"Submit\"})})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Enter OTP\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onSubmitOTP,children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-login\",children:/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"otp\",autoComplete:\"off\",className:\"form-control\",placeholder:\"  Enter OTP Number...\",onChange:this.handleChange,\"aria-label\":\"Recipient's username\",\"aria-describedby\":\"button-addon2\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"button-login\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",type:\"sumbit\",id:\"button-addon2\",children:\"Submit\"})})]})]});}}]);return Login;}(React.Component);export default Login;","map":{"version":3,"sources":["/home/pronay/Desktop/achar/src/components/Login.js"],"names":["React","firebase","getAuth","RecaptchaVerifier","signInWithPhoneNumber","auth","Login","handleChange","e","target","name","value","setState","configureCaptcha","window","recaptchaVerifier","response","onSignInSubmit","console","log","defaultCountry","preventDefault","phoneNumber","state","mobile","appVerifier","then","confirmationResult","catch","error","onSubmitOTP","code","otp","confirm","result","user","JSON","stringify","alert","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport firebase from './Firebase';\nimport { getAuth, RecaptchaVerifier } from \"firebase/auth\";\nimport { signInWithPhoneNumber } from \"firebase/auth\";\nconst auth = getAuth();\n\n\nclass Login extends React.Component {\n  handleChange = (e) =>{\n    const {name, value } = e.target\n    this.setState({\n        [name]: value\n      })\n  }\n  configureCaptcha = () =>{\n    window.recaptchaVerifier = new RecaptchaVerifier('sign-in-button', {\n      'size': 'invisible',\n      'callback': (response) => {\n        // reCAPTCHA solved, allow signInWithPhoneNumber.\n        this.onSignInSubmit();\n        console.log(\"Recaptca varified\")\n      },\n      defaultCountry: \"BNG\"\n    },auth);\n  }\n  \n  onSignInSubmit = (e) => {\n    e.preventDefault()\n    this.configureCaptcha()\n    const phoneNumber = \"+88\" + this.state.mobile\n    console.log(phoneNumber)\n    const appVerifier = window.recaptchaVerifier;\n    signInWithPhoneNumber(auth, phoneNumber, appVerifier)\n        .then((confirmationResult) => {\n          // SMS sent. Prompt user to type the code from the message, then sign the\n          // user in with confirmationResult.confirm(code).\n          window.confirmationResult = confirmationResult;\n          console.log(\"OTP has been sent\")\n          // ...\n        }).catch((error) => {\n          // Error; SMS not sent\n          // ...\n          console.log(\"SMS not sent\")\n        });\n  }\n  \n  onSubmitOTP = (e) =>{\n    e.preventDefault()\n    const code = this.state.otp\n    console.log(code)\n    window.confirmationResult.confirm(code).then((result) => {\n      // User signed in successfully.\n      const user = result.user;\n      console.log(JSON.stringify(user))\n      alert(\"User is verified\")\n      // ...\n    }).catch((error) => {\n      // User couldn't sign in (bad verification code?)\n      // ...\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"login-card\">\n       \n        <h2>Login Form</h2>\n        <form onSubmit={this.onSignInSubmit}>\n          <div id=\"sign-in-button\"></div>\n          <div className=\"input-login\">\n            <input type=\"tel\" name=\"mobile\" autoComplete=\"off\" className=\"form-control\" placeholder=\"  Enter Mobile Number...\" onChange={this.handleChange} aria-label=\"Recipient's username\" aria-describedby=\"button-addon2\" required />\n          </div>  \n          <div className=\"button-login\">\n            <button className=\"btn btn-success\"  type=\"sumbit\" id=\"button-addon2\">Submit</button>\n          </div>\n        </form>\n\n        <h2>Enter OTP</h2>\n        <form onSubmit={this.onSubmitOTP}>\n          <div className=\"input-login\">\n            <input type=\"tel\" name=\"otp\" autoComplete=\"off\" className=\"form-control\" placeholder=\"  Enter OTP Number...\" onChange={this.handleChange} aria-label=\"Recipient's username\" aria-describedby=\"button-addon2\" required />\n          </div>\n          <div className=\"button-login\">\n            <button className=\"btn btn-success\" type=\"sumbit\" id=\"button-addon2\">Submit</button>\n          </div>\n        </form>\n\n\n    \n       {/* <input type=\"number\" name=\"otp\" placeholder=\"OTP Number\" required onChange={this.handleChange}/>\n          <button type=\"submit\">Submit</button> */}\n\n\n      </div>\n      \n    )\n  }\n}\nexport default Login;"]},"metadata":{},"sourceType":"module"}